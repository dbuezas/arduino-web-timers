{"version":3,"sources":["data/timers.ts","Plot/margin.ts","Plot/XAxis.tsx","Plot/YAxis.tsx","helpers/simulator.ts","Plot/CompareRegisterHandle.tsx","Plot/InterruptArrow.tsx","Plot/Curve.tsx","helpers/compareRegisterUtil.ts","state/useHash.ts","data/lgt328p/index.ts","data/atmega328p/index.ts","helpers/types.ts","data/index.ts","state/state.tsx","helpers/helpers.ts","Panes/state.ts","Plot/Plot.tsx","Panes/Code.tsx","Panes/TimerSetup.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["tsv","str","trim","split","map","line","join","registers","constraints","tsvRegisters","configs","tsvConstraints","table","filter","startsWith","header","row","Object","fromEntries","colName","i","replace","values","includes","rows","register","column","bitNameDescriptions","Timer","timerMode","topValue","clockPrescalerOrSource","clockDoubler","ExternalClockInput","FCPU_UI","CompareOutputModeA","interruptA","OCnA_OutputPort","OCnA_OutputCurrent","CompareOutputModeB","interruptB","OCnB_OutputPort","OCnB_OutputCurrent","CompareOutputModeC","interruptC","OCnC_OutputPort","OCnC_OutputCurrent","Extras","updateOcrMoment","setTovMoment","InterruptOnTimerOverflow","InputCaptureNoiseSupression","InterruptOnInputCapture","InputCaptureEdgeSelect","DeadTime","bitValueDescriptions","Normal","PCPWM","CTC","FPWM","PFCPWM","ICR1","ICR3","AC0P","B1","B3","C0","D3","D6","E4","F1","F5","F6","F7","F2","F4","B2","F3","D5","TOP","BOTTOM","immediate","title","on","margin","toFixed","float","digits","padding","Math","pow","round","XAxis","height","xScale","nodeRef","useRef","gEl","current","useLayoutEffect","xTicks","ticks","domain","select","call","g","attr","axisBottom","tickValues","tickPadding","tickSize","tickFormat","t","s","Number","isFinite","m","h","ms","us","ns","formatTime","tickSizeOuter","className","ref","YAxis","width","yScale","yTicks","axisLeft","v","_d","_","path","offsetCounter","counter","offset","top","cpuToTcnt","tcnt","dir","tcntToCpu","getTimerLength","cpu","matches","a","b","constrain","n","min","max","CompareRegisterHandle","forwardRef","setCompareRegisterValue","compareRegisterValue","yExtent","name","useState","draggingTV","setDraggingTV","useImperativeHandle","onMouseUp","onMouseMove","y","e","preventDefault","scaled","invert","scaledY","onMouseDown","useCallback","x1","x2","y1","y2","onTouchStart","fill","x","dy","dx","displayName","InterruptArrow","label","flagValues","TCNT","transform","d","Curve","data","idx","datum","theLine","undefined","getName","genericName","bitValues","OutputA","timerNr","OutputB","OutputC","Input","DeadTimeA","DeadTimeB","getIsTop","getIsInterrupt","getIsActiveOutput","getIsUsed","getIsActiveDeadTime","getIsInput","getIsOutput","getIsDeadTime","compareRegs","getCompareRegTraits","value","parseFloat","code","isInput","isOutput","isDeadTime","isActiveOutput","isTop","isInterrupt","isUsed","getAllCompareRegTraits","getHashParams","hash","window","location","slice","URLSearchParams","setFullHash","debounce","pathname","leading","trailing","setHashFromObject","record","cleanRecord","entries","hashParams","toString","timers","forEach","push","PanelModes","MicroControllers","LGT8F328P","lgt328p","ATMEGA328P","atmega328p","panelModeState","atom","key","default","usePrevious","useEffect","defaultState","mcu","timer","RegisterLocationStateChange","params","setHashParams","handleHashChange","addEventListener","removeEventListener","useHashParams","prev","withNulls","useSetRecoilState","userConfigBitBulkState","RegisterLocationState","userConfigState_internal","atomFamily","param","selector","get","Error","set","obj","DefaultValue","userConfigBitState","selectorFamily","bitName","delete","setHashParam","mcuTimers","micro","timerState","splitTables","left","tables","changed","cluster","remaining","colsLeft","keys","colsRight","intersection","length","uniq","isTruthy","getFullDomains","domains","variable","getConstrainedDomains","domains_","done","every","negated","some","negatedVals","remove","val","positiveVals","miniDomain","flatMap","sizeBefore","groupsState","suggestedGroupAssignmentState","groupIdx","userState","groupConfigState","group","groupDomainsState","instantiations","mapValues","suggestedBitAssignmentState","groupIdxFromBitNameState","suggestedAssignmentState","assignments","flat","assign","relevantBitNames","getBitNames","userConfig","userBitConfig","findIndex","hasOwnProperty","groupFromBitNameState","allBitOptionsState","bitOptionsState","allBitOptions","enabledOptions","selectedWithout","defaultValue","forcedOption","suggestedOption","selectedOption","options","isSuggested","isDisabled","Plot","style","useRecoilValue","counterMax","parseInt","prescaler","NaN","FCPU","cpuHz","tovTime","OCRnXs","OCRnXs_behaviour","ICRn","deadTimeEnable","deadTimeA","deadTimeB","IOCR_states","traits","find","ocrMax","ioCount","iocr","setReg","sqrt","simulation","prescaledCPUEnd","results","OCnXs","MATCH_Xs","OVF","CAPT","deadTimes","freq","isNaN","actions","behaviour","action","at","matchAt","to","actionDeadTimeA","actionDeadTimeB","bClear","bSet","tcntEventTimes","prescaledCPU","nextEvents","distToNext","simTimer","containerRef","useSize","height_","activeOCnXs","height_timer","scaleLinear","extent","range","rangeRound","containerEl","handleMouseUp","handleMouseMove","offsetY","MouseEvent","clientY","targetTouches","getBoundingClientRect","document","passive","Tag","k","j","setUserConfigBit","yExtent2","LinkToThisPage","href","url","setUrl","handleUrlChange","Code","codeContainerRef","CopyToClipboard","CompareRegsCode","Interrupts","TimerConfgCode","bitNames","regName","bitAssignments","bitValue","bitAssignmentsStr","suggestedConfig","interruptCommonSignature","React","memo","clicked","setClicked","setTimeout","Button","color","onClick","copy","textContent","console","log","BitConfig","humanName","descr","descrTitle","CheckboxGroup","inline","onChange","Whisper","placement","trigger","speaker","Tooltip","Icon","icon","fontSize","bitValueDescr","Checkbox","indeterminate","disabled","getAllBitnamesInGroups","groups","getPanesGroupedByDescription","allBitnamesInGroups","bitDescriptions","panelName","getHiddenPane","allBitnames","visibleBitnames","difference","TimerSetup","panels","Internal","ByDependencies","getPanesByGroup","FlexboxGrid","flexGrow","overflow","Item","Panel","bordered","shaded","defaultExpanded","direction","bottom","borderTop","touchAction","minHeight","gh","App","timerIdx","useRecoilState","panelMode","setPanelMode","isLoading","rel","Container","Header","Navbar","appearance","src","alt","marginTop","textAlign","Body","Nav","Dropdown","aChip","onSelect","eventKey","activeKey","pullRight","mode","target","frameBorder","scrolling","Content","background","position","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.20f13ff6.chunk.js","sourcesContent":["export const tsv = (str: string) => {\n  str = str\n    .trim()\n    .split('\\n')\n    .map((line) => line.trim())\n    .join('\\n')\n  const [registers, ...constraints] = str.trim().split('\\n\\n')\n  return {\n    registers: tsvRegisters(registers),\n    configs: constraints.map(tsvConstraints)\n  }\n}\nexport const tsvConstraints = (str: string) => {\n  const table = str\n    .trim()\n    .split('\\n')\n    .filter((line) => !line.startsWith('//'))\n    .map((line) => line.trim().split('\\t'))\n  const [header, ...rows] = table\n  return rows\n    .map((row) =>\n      Object.fromEntries(\n        header.map((colName, i) => [\n          colName,\n          row[i].trim().replace(/\\\\n/g, '\\n').replace(/\\\\t/g, '\\t')\n        ])\n      )\n    )\n    .filter((row) => !Object.values(row).includes('-'))\n}\n\nexport const tsvRegisters = (str: string) => {\n  const table = str\n    .trim()\n    .split('\\n')\n    .filter((line) => !line.startsWith('//'))\n    .map((line) => line.trim().split('\\t'))\n  const [header, ...rows] = table\n  return Object.fromEntries(\n    header.map((register, column) => [register, rows.map((row) => row[column])])\n  )\n}\n\nexport const bitNameDescriptions: Record<string, Record<string, string>> = {\n  Timer: {\n    timerMode: 'Timer mode',\n    topValue: 'Top value of timer',\n    clockPrescalerOrSource: 'Clock prescaler or external source',\n    clockDoubler: 'Double timer clock speed',\n    ExternalClockInput: 'External clock input port',\n    FCPU_UI: 'CPU Clock'\n  },\n  'Output A': {\n    CompareOutputModeA: 'Behaviour',\n    interruptA: 'Interrupt on match',\n    OCnA_OutputPort: 'Output port',\n    OCnA_OutputCurrent: 'Output current'\n  },\n  'Output B': {\n    CompareOutputModeB: 'Behaviour',\n    interruptB: 'Interrupt on match',\n    OCnB_OutputPort: 'Output port',\n    OCnB_OutputCurrent: 'Output current'\n  },\n  'Output C': {\n    CompareOutputModeC: 'Behaviour',\n    interruptC: 'Interrupt on match',\n    OCnC_OutputPort: 'Output port',\n    OCnC_OutputCurrent: 'Output current'\n  },\n  Extras: {\n    updateOcrMoment: 'When are the OCRs updated',\n    setTovMoment: 'When overflow interrupt is triggered',\n    InterruptOnTimerOverflow: 'Interrupt on Timer Overflow',\n    InputCaptureNoiseSupression: 'Input capture noise supression',\n    InterruptOnInputCapture: 'Interrupt on Input Capture',\n    InputCaptureEdgeSelect: 'Input Capture Edge Select',\n    DeadTime: 'Insert dead time'\n  }\n}\nexport const bitValueDescriptions: Record<string, Record<string, string>> = {\n  timerMode: {\n    Normal: 'Counts always up, overflowing to zero. Duty is always 50%.',\n    PCPWM:\n      'Phase correct PWM: Counts up to TOP then down to 0. Output compare registers updated at TOP, maintaining the phase of the PWM. Output is set in one direction and cleared on the other one. Duty goes from full 0% to full 100% but maximum frequency is half that of FPWM.',\n    CTC: 'Clear timer on compare: Counts up to TOP and resets to zero. Duty is always 50%.',\n    FPWM: 'Fast PWM: Counts up to TOP and resets to zero. Duty cycle cannot go to 0% (on clear-on-compare-match), or to 100% (on set-on-compare-match).',\n    PFCPWM:\n      'Phase frequency correct PWM: idem to PCPWM, but output compare registers are updated at zero, resulting in a constant frequency even when the output compare registers are changed during operation.'\n  },\n  topValue: {\n    ICR1: 'If ICR1 is not used as top, the input capture pin (ICP1) is PB0.\\nIf ICR1 is used as top, ICP1 is disconnected. The input compare register is not double-buffered so it will be updated immediatly (and not on TOP or BOTTOM like OCRs). This may make the timer lose a match if changed near it.',\n    ICR3: 'If ICR3 is not used as top, the input capture pin (ICP3) is PF4.\\nIf ICR3 is used as top, ICP3 is disconnected. The input compare register is not double-buffered so it will be updated immediatly (and not on TOP or BOTTOM like OCRs). This may make the timer lose a match if changed near it.'\n  },\n  OCnA_OutputPort: {\n    'E4+C0': 'Both at the same time',\n    AC0P: 'Package\tSilk\tIC\\n───────\t────\t──\\nQFP48:\tD?\t15 \\nQFP32:\tD6\t10 \\nSSOP20:\tD6\t9',\n    B1: 'Package\tSilk\tIC\\n───────\t────\t──\\nQFP48:\tD?\t19 \\nQFP32:\tD9\t13 \\nSSOP20:\tD9\t11',\n    B3: 'Package\tSilk\tIC\\n───────\t────\t──\\nQFP48:\tD?\t23 \\nQFP32:\tD11\t15 \\nSSOP20:\tD11\t12',\n    C0: 'Package\tSilk\tIC\\n───────\t────\t──\\nQFP48:\tD?\t35 \\nQFP32:\tA0\t25 \\nSSOP20:\tA0\t17',\n    D3: 'Package\tSilk\tIC\\n───────\t────\t──\\nQFP48:\tD?\t1 \\nQFP32:\tD3\t1 \\nSSOP20:\tD3\t3',\n    D6: 'Package\tSilk\tIC\\n───────\t────\t──\\nQFP48:\tD?\t14 \\nQFP32:\tD6\t10 \\nSSOP20:\tD6\t9',\n    E4: 'Package\tSilk\tIC\\n───────\t────\t──\\nQFP48:\tD?\t3 \\nQFP32:\t-\t3 \\nSSOP20:\t-\t-',\n    F1: 'Package\tSilk\tIC\\n───────\t────\t──\\nQFP48:\tD?\t46 \\nQFP32:\tD1\t31 \\nSSOP20:\tD1\t1',\n    F5: 'Package\tSilk\tIC\\n───────\t────\t──\\nQFP48:\tD?\t9 \\nQFP32:\t-\t6 \\nSSOP20:\tD?\t6',\n    F6: 'Package\tSilk\tIC\\n───────\t────\t──\\nQFP48:\tD?\t10 \\nQFP32:\t-\t- \\nSSOP20:\t-\t-',\n    F7: 'Package\tSilk\tIC\\n───────\t────\t──\\nQFP48:\tD?\t17 \\nQFP32:\t-\t- \\nSSOP20:\tD7\t10'\n  },\n  OCnB_OutputPort: {\n    F2: 'Package\tSilk\tIC\\n───────\t────\t──\\nQFP48:\tD?\t48 \\nQFP32:\tD2\t32 \\nSSOP20:\tD2\t2',\n    F7: 'Package\tSilk\tIC\\n───────\t────\t──\\nQFP48:\tD?\t17 \\nQFP32:\t-\t- \\nSSOP20:\tD7\t10',\n    D3: 'Package\tSilk\tIC\\n───────\t────\t──\\nQFP48:\tD?\t1 \\nQFP32:\tD3\t1 \\nSSOP20:\tD3\t3',\n    F4: 'Package\tSilk\tIC\\n───────\t────\t──\\nQFP48:\tD?\t5 \\nQFP32:\t-\t5 \\nSSOP20:\tD3\t3',\n    B2: 'Package\tSilk\tIC\\n───────\t────\t──\\nQFP48:\tD?\t20 \\nQFP32:\tD10\t14 \\nSSOP20:\tD10\t12',\n    F3: 'Package\tSilk\tIC\\n───────\t────\t──\\nQFP48:\tD?\t4 \\nQFP32:\t-\t- \\nSSOP20:\t-\t-',\n    D5: 'Package\tSilk\tIC\\n───────\t────\t──\\nQFP48:\tD?\t13 \\nQFP32:\tD5\t9 \\nSSOP20:\tD5\t8'\n  },\n  OCnC_OutputPort: {\n    F3: 'Package\tSilk\tIC\\n───────\t────\t──\\nQFP48:\tD?\t4 \\nQFP32:\t-\t- \\nSSOP20:\t-\t-'\n  },\n  updateOcrMoment: {\n    TOP: 'OCR registers are updated whenever the timer reaches its top. Can be a fixed number or the value of some register',\n    BOTTOM: 'OCR registers are updated when the timer resets to zero',\n    immediate:\n      'OCR registers are updated as soon as they are changed, without a buffer.'\n  },\n  InterruptOnInputCapture: {\n    title: `When ICRn not used as TOP and a capture is triggered (PB0 in Timer1, PF4 in Timer3), the counter value is copied into the input capture register (ICRn). The event will also set the input capture flag (ICFn), and this can be used to cause an input capture interrupt, if this interrupt is enabled. \\nIt can also be used to trigger an interrupt on compare match against the counter.`\n  },\n  InputCaptureNoiseSupression: {\n    on: `The noise canceler improves noise immunity by using a simple digital filtering scheme. The noise canceler input is monitored over four samples, and all four must be equal for changing the output that in turn is used by the edge detector.\n    When enabled, the noise canceler introduces additional four system clock cycles of delay from a change applied\n    to the input, to the update of the ICRn register. The noise canceler uses the system clock and is therefore not affected by the\n    prescaler.`\n  },\n  InputCaptureEdgeSelect: {\n    title: `When the ICRn is used as TOP value, the ICPn is disconnected and consequently the input capture function is disabled.`\n  },\n  DeadTime: {\n    on: `dead time enable control\n    Setting DTENn to logic one, inserting dead time is enable. Base on waveform generated in B channel compare output, both OCnA and OCnB can insert dead time, whose interval is decided by corresponding counter time of DTRn register. Waveform polarity output by OCnA is decided by relationship between CnMn and COMnB, for details referring to list for waveform polarity after inserting dead time.`\n  }\n}\n","export const margin = { top: 30, right: 120, bottom: 30, left: 50 }\n","import { ScaleLinear, ticks, select, axisBottom } from 'd3'\nimport { useRef, useLayoutEffect } from 'react'\nimport { margin } from './margin'\n\ntype ohNoItIsAny = any\n\nconst toFixed = (float: number, digits = 0) => {\n  const padding = Math.pow(10, digits)\n  return Math.round(float * padding) / padding\n}\n\nexport function formatTime(s: ohNoItIsAny) {\n  s = Number(s)\n  if (!Number.isFinite(s)) return '--'\n  if (s === 0) return '0'\n\n  const m = s / 60\n  const h = s / 60 / 60\n  const ms = s * 1000\n  const us = ms * 1000\n  const ns = us * 1000\n  if (ns < 10) return toFixed(ns, 1) + 'ns'\n  if (ns < 1000) return toFixed(ns) + 'ns'\n  if (us < 10) return toFixed(us, 1) + 'μs'\n  if (us < 1000) return toFixed(us) + 'μs'\n  if (ms < 10) return toFixed(ms, 1) + 'ms'\n  if (ms < 1000) return toFixed(ms) + 'ms'\n  if (s < 10) return toFixed(s, 1) + 's'\n  if (h > 1) return toFixed(h, 0) + 'h' + toFixed(m % 60, 1) + 'm'\n  if (m > 5) return toFixed(m, 0) + 'm' + toFixed(s % 60, 1) + 's'\n  return toFixed(s, 0) + 's'\n}\n\ntype Props = {\n  height: number\n  xScale: ScaleLinear<number, number>\n}\nexport default function XAxis({ height, xScale }: Props) {\n  const nodeRef = useRef<SVGSVGElement>(null)\n  const gEl = nodeRef.current\n  useLayoutEffect(() => {\n    if (!gEl) return\n    const xTicks = ticks(xScale.domain()[0], xScale.domain()[1], 10)\n\n    select(gEl).call((g) => {\n      g.attr('transform', `translate(0,${height - margin.bottom})`)\n        // .transition()\n        // .ease(easeLinear)\n        // .duration(100)\n        .call(\n          axisBottom(xScale)\n            .tickValues(xTicks)\n            .tickPadding(10)\n            .tickSize(-height + margin.top + margin.bottom)\n            .tickFormat((t) => formatTime(t as any))\n            .tickSizeOuter(0)\n        )\n\n      //   .call((g) => g.select('.domain').remove())\n      // g.call((g) => g.select('.domain').remove())\n\n      // return the selection:\n    })\n  }, [gEl, xScale, height])\n\n  return <g className=\"x axis\" ref={nodeRef} />\n}\n","import { ScaleLinear, ticks, select, axisLeft } from 'd3'\nimport { useRef, useLayoutEffect } from 'react'\n\nimport { margin } from './margin'\n\ntype Props = {\n  width: number\n  yScale: ScaleLinear<number, number>\n}\nexport default function YAxis({ width, yScale }: Props) {\n  const nodeRef = useRef<SVGSVGElement>(null)\n  const gEl = nodeRef.current\n\n  useLayoutEffect(() => {\n    if (!gEl) return\n    const yTicks = ticks(yScale.domain()[0], yScale.domain()[1], 10)\n    select(gEl)\n      // .transition()\n      // .duration(200)\n      .call((g) =>\n        g.attr('transform', `translate(${margin.left},0)`).call(\n          axisLeft(yScale)\n            .tickValues(yTicks)\n            .tickPadding(10)\n            .tickSize(-width + margin.right + margin.left - 1)\n            .tickFormat((v: any) => v)\n        )\n      )\n      .call((g) =>\n        g.select('.domain').attr(\n          'd',\n          (_d, _, path) =>\n            // close path so the domain has a right border\n            select(path[0]).attr('d') + 'z'\n        )\n      )\n  }, [gEl, yScale, width])\n\n  return <g className=\"y axis\" ref={nodeRef} />\n}\n","/* eslint-disable no-loop-func */\nimport { uniq } from 'lodash'\n\n/*\nPCPWM == updates at top\nPFCPWM == updates at bottom\nbut this should be passed from update OCRnX upate time bit value\n*/\ntype TimerMode = 'Normal' | 'PCPWM' | 'CTC' | 'FPWM' | 'PFCPWM'\ntype Counter = { tcnt: number; dir: number }\nconst tcntToCpu = ({ tcnt, dir }: Counter, top: number) => {\n  if (dir === -1) return 2 * top - tcnt\n  return tcnt\n}\nconst offsetCounter = (\n  counter: Counter,\n  offset: number,\n  top: number,\n  timerMode: TimerMode\n) => cpuToTcnt(tcntToCpu(counter, top) + offset, top, timerMode)\n\nconst getTimerLength = (top: number, timerMode: TimerMode) => {\n  const isDoubleSlope = ['PCPWM', 'PFCPWM'].includes(timerMode)\n  return isDoubleSlope ? top * 2 : top\n}\nconst cpuToTcnt = (cpu: number, top: number, timerMode: TimerMode) => {\n  while (cpu < 0) cpu += top\n  const isDoubleSlope = ['PCPWM', 'PFCPWM'].includes(timerMode)\n  if (!isDoubleSlope) {\n    // e.g top = 3\n    // 0 1 2 3 4 -- cpu\n    // 0 1 2 3 0 -- single slope\n    return { tcnt: cpu % (top + 1), dir: 1 }\n  }\n  // e.g top = 3\n  // 0 1 2 3 4 5 6\n  // 0 1 2 3 2 1 0 -- double slope\n  const tcnt = cpu % (top * 2)\n  if (tcnt < top) return { tcnt, dir: 1 }\n  return { tcnt: top * 2 - tcnt, dir: -1 }\n}\nconst matches = (a: Counter, b: Counter) => a.tcnt === b.tcnt && a.dir === b.dir\n\ntype Props = {\n  timerMode: TimerMode\n  prescaler: number\n  cpuHz: number\n  top: number\n  counterMax: number\n  tovTime: 'BOTTOM' | 'TOP' | 'MAX'\n  OCRnXs: number[]\n  OCRnXs_behaviour: (\n    | 'clear'\n    | 'set'\n    | 'set-on-match, clear-at-max'\n    | 'clear-on-match, set-at-max'\n    | 'toggle'\n    | 'clear-up, set-down'\n    | 'set-up, clear-down'\n  )[]\n  ICRn: number\n  deadTimeEnable: boolean\n  deadTimeA: number\n  deadTimeB: number\n}\nconst TOGGLE = -1\nexport default function simTimer({\n  timerMode,\n  prescaler,\n  cpuHz,\n  top,\n  counterMax,\n  tovTime,\n  OCRnXs,\n  OCRnXs_behaviour,\n  ICRn,\n  deadTimeEnable,\n  deadTimeA,\n  deadTimeB\n}: Props) {\n  const prescaledCPUEnd = getTimerLength(top, timerMode) * 4\n  const results = {\n    t: [] as number[],\n    cpu: [] as number[],\n    TCNT: [] as number[],\n    OCnXs: OCRnXs.map(() => [] as number[]),\n    MATCH_Xs: OCRnXs.map(() => [] as number[]),\n    OVF: [] as number[],\n    CAPT: [] as number[],\n    deadTimes: [[], []] as number[][],\n    freq: cpuHz / (getTimerLength(top, timerMode) + 1) / prescaler\n  }\n  if (isNaN(top)) return results\n  let OCnXs = OCRnXs.map(() => 0)\n  let deadTimes = [0, 0]\n\n  const actions = OCRnXs_behaviour.map((behaviour, i) => {\n    const action = {\n      at: [] as { tcnt: number; dir: number; to: number }[],\n      matchAt: OCRnXs[i],\n      behaviour\n    }\n    switch (behaviour) {\n      case 'set':\n        action.at = [{ tcnt: OCRnXs[i], dir: 1, to: 1 }]\n        break\n      case 'clear':\n        action.at = [{ tcnt: OCRnXs[i], dir: 1, to: 0 }]\n        break\n      case 'toggle':\n        action.at = [{ tcnt: OCRnXs[i], dir: 1, to: TOGGLE }]\n        break\n      case 'set-on-match, clear-at-max':\n        action.at = [\n          { tcnt: OCRnXs[i], dir: 1, to: 1 },\n          { tcnt: top, dir: 1, to: 0 }\n        ]\n        break\n      case 'clear-on-match, set-at-max':\n        action.at = [\n          { tcnt: OCRnXs[i], dir: 1, to: 0 },\n          { tcnt: top, dir: 1, to: 1 }\n        ]\n        break\n      case 'set-up, clear-down':\n        action.at = [\n          { tcnt: OCRnXs[i], dir: 1, to: 1 },\n          { tcnt: OCRnXs[i], dir: -1, to: 0 }\n        ]\n        break\n      case 'clear-up, set-down':\n        action.at = [\n          { tcnt: OCRnXs[i], dir: 1, to: 0 },\n          { tcnt: OCRnXs[i], dir: -1, to: 1 }\n        ]\n        break\n    }\n    OCnXs[i] = +!action.at[0]?.to || 0\n    return action\n  })\n\n  let actionDeadTimeA = [] as { tcnt: number; dir: number; to: number }[]\n  let actionDeadTimeB = [] as { tcnt: number; dir: number; to: number }[]\n\n  if (deadTimeEnable) {\n    /* deadtime \n      setB at setB + deadTimeB\n      changeA at setB (to !isAInverted)\n      clearB at clearB\n      changeA at clearB+deadTimeA (to isAInverted)\n    */\n    const bClear = actions[1].at.find(({ to }) => to === 0)!\n    const bSet = actions[1].at.find(({ to }) => to === 1)!\n    actionDeadTimeA = [{ to: 1, tcnt: bClear.tcnt, dir: bClear.dir }]\n    if (deadTimeA < top)\n      actionDeadTimeA.push({\n        to: 0,\n        ...offsetCounter(bClear, deadTimeA, top, timerMode)\n      })\n    actionDeadTimeB = [{ to: 1, tcnt: bSet.tcnt, dir: bSet.dir }]\n    if (deadTimeB < top)\n      actionDeadTimeB.push({\n        to: 0,\n        ...offsetCounter(bSet, deadTimeB, top, timerMode)\n      })\n  }\n  let tcntEventTimes = [\n    // Optimization:\n    // Things happen only when TCNT equals these values.\n    // values surounding the events are added to ensure the plot\n    // keeps the lines at their values until a change happens\n    0,\n    ...OCRnXs,\n    ICRn,\n    ...actionDeadTimeA.map(({ tcnt }) => tcnt),\n    ...actionDeadTimeB.map(({ tcnt }) => tcnt),\n    top,\n    counterMax\n  ].flatMap((n) => [n - 1, n, n + 1])\n\n  let prescaledCPU = -1\n  tcntEventTimes = uniq(tcntEventTimes)\n\n  let counter = {\n    tcnt: -1,\n    dir: 1\n  }\n  while (prescaledCPU < prescaledCPUEnd) {\n    const nextEvents = tcntEventTimes\n      .map((n) => (n - counter.tcnt) * counter.dir)\n      .filter((n) => n > 0)\n    let distToNext = Math.min(...nextEvents)\n    let MATCH_Xs = OCRnXs.map(() => 0)\n    let OVF = 0\n    let CAPT = 0\n    prescaledCPU += distToNext\n\n    counter = cpuToTcnt(prescaledCPU, top, timerMode)\n    if (counter.tcnt === 0 && tovTime === 'BOTTOM') OVF = 1\n    if (counter.tcnt === top && tovTime === 'TOP') OVF = 1\n    if (counter.tcnt === counterMax && tovTime === 'MAX') OVF = 1\n\n    actions.forEach(({ at, matchAt }, i) => {\n      at.forEach((action) => {\n        if (matches(counter, action)) {\n          OCnXs[i] = action.to === TOGGLE ? +!OCnXs[i] : action.to\n        }\n      })\n      ;[actionDeadTimeA, actionDeadTimeB].forEach((at, i) => {\n        at.forEach((action) => {\n          if (matches(counter, action)) {\n            deadTimes[i] = action.to\n          }\n        })\n      })\n      if (counter.tcnt === matchAt) MATCH_Xs[i] = 1\n    })\n\n    if (counter.tcnt === ICRn) CAPT = 1\n    results.t.push((prescaledCPU * prescaler) / cpuHz)\n    results.cpu.push(prescaledCPU * prescaler)\n    results.TCNT.push(counter.tcnt)\n    results.OVF.push(OVF)\n    results.CAPT.push(CAPT)\n    for (const i in OCRnXs_behaviour) {\n      results.OCnXs[i].push(OCnXs[i])\n      results.MATCH_Xs[i].push(MATCH_Xs[i])\n    }\n    for (const i in deadTimes) {\n      results.deadTimes[i].push(deadTimes[i])\n    }\n  }\n  if (deadTimeEnable) {\n    if (OCRnXs_behaviour[0] === OCRnXs_behaviour[1]) {\n      results.OCnXs[0] = results.OCnXs[1].map(\n        (b, i) => +(b || results.deadTimes[0][i])\n      )\n    } else {\n      results.OCnXs[0] = results.OCnXs[1].map(\n        (b, i) => +(!b && !results.deadTimes[0][i])\n      )\n    }\n    results.OCnXs[1] = results.OCnXs[1].map(\n      (b, i) => +(b && !results.deadTimes[1][i])\n    )\n  }\n  return results\n}\n\nexport type Simulation = ReturnType<typeof simTimer>\n","import {\n  forwardRef,\n  MouseEventHandler,\n  useCallback,\n  useImperativeHandle,\n  useState\n} from 'react'\nimport { margin } from './margin'\nimport './CompareRegisterHandle.css'\nimport { ScaleLinear } from 'd3-scale'\n\nexport type CompareRegisterHandleRef = {\n  onMouseUp: MouseEventHandler\n  onMouseMove: (n: number, e: MouseEvent | TouchEvent) => void\n}\ntype Props = {\n  width: number\n  yExtent: [number, number]\n  yScale: ScaleLinear<number, number>\n  setCompareRegisterValue: (n: number) => void\n  compareRegisterValue: number\n  name: string\n}\n\nconst constrain = (n: number, min: number, max: number) =>\n  Math.min(Math.max(n, min), max)\n\nconst CompareRegisterHandle = forwardRef<CompareRegisterHandleRef, Props>(\n  (\n    {\n      width,\n      yScale,\n      setCompareRegisterValue,\n      compareRegisterValue,\n      yExtent,\n      name\n    },\n    ref\n  ) => {\n    const [draggingTV, setDraggingTV] = useState(false)\n    useImperativeHandle(ref, () => ({\n      onMouseUp() {\n        setDraggingTV(false)\n      },\n      onMouseMove(y, e) {\n        e.preventDefault()\n        if (draggingTV) {\n          let scaled = yScale.invert(y)\n          scaled = constrain(Math.round(scaled), ...yExtent)\n          setCompareRegisterValue(scaled)\n        }\n      }\n    }))\n    let scaledY = yScale(constrain(compareRegisterValue, ...yExtent))\n    const onMouseDown = useCallback(\n      (e) => {\n        // e.preventDefault()\n        // e.stopPropagation()\n        setDraggingTV(true)\n      },\n      [setDraggingTV]\n    )\n    return (\n      <>\n        <line\n          className={`OCR ${name}`}\n          x1={margin.left}\n          x2={width - margin.right}\n          y1={scaledY}\n          y2={scaledY}\n        ></line>\n        <line\n          className={`OCRHandle ${name}`}\n          onMouseDown={onMouseDown}\n          onTouchStart={onMouseDown}\n          x1={margin.left}\n          x2={width}\n          y1={scaledY}\n          y2={scaledY}\n        ></line>\n        <text\n          className={`OCRText ${name}`}\n          fill=\"currentColor\"\n          onMouseDown={onMouseDown}\n          onTouchStart={onMouseDown}\n          y={scaledY}\n          x={width - margin.right}\n          dy=\".32em\"\n          dx=\"10\"\n        >\n          {name}={compareRegisterValue}\n        </text>\n      </>\n    )\n  }\n)\n\nCompareRegisterHandle.displayName = 'CompareRegisterHandle'\n\nexport default CompareRegisterHandle\n","import { ScaleLinear, line } from 'd3'\n\ntype Props = {\n  label: string\n  flagValues: number[]\n  t: number[]\n  TCNT: number[]\n  xScale: ScaleLinear<number, number>\n  yScale: ScaleLinear<number, number>\n}\nexport default function InterruptArrow({\n  label,\n  flagValues,\n  t,\n  TCNT,\n  xScale,\n  yScale\n}: Props) {\n  return (\n    <>\n      {flagValues.map(\n        (n, i) =>\n          n && (\n            <g\n              key={i}\n              transform={`translate(${xScale(t[i])}, ${yScale(TCNT[i])})`}\n            >\n              <path\n                d={\n                  line()([\n                    [-3, -5],\n                    [0, 0],\n                    [3, -5],\n                    [0, 0],\n                    [0, -12],\n                    [20, -12]\n                  ])!\n                }\n              />\n              <text key={i} y=\"-20\" x=\"0\" dy=\".32em\">\n                {label}\n              </text>\n            </g>\n          )\n      )}\n    </>\n  )\n}\n","import { ScaleLinear, line } from 'd3'\nimport { margin } from './margin'\n\nimport './Curve.css'\n\ntype CurvesProps = {\n  data: [number, number][]\n  xScale: ScaleLinear<number, number>\n  yScale: ScaleLinear<number, number>\n  idx: any\n  name?: string\n}\n\nexport function Curve({ xScale, yScale, data, idx, name }: CurvesProps) {\n  const theLine = line<[number, number]>()\n    .x(([t, datum]) => xScale(t)!)\n    .y(([t, datum]) => yScale(datum)!)\n\n  const d = theLine(data)\n  return (\n    <>\n      <path className={`curve-${idx}`} d={d || undefined}></path>\n      {name && (\n        <text\n          className={`OCText ${name}`}\n          fill=\"currentColor\"\n          y={yScale(0)}\n          x={xScale(0) - margin.left}\n          dy=\".32em\"\n          dx=\"10\"\n        >\n          {name}\n        </text>\n      )}\n    </>\n  )\n}\n","import { TRow } from './types'\n\nexport type GenericCompRegName =\n  | 'OutputA'\n  | 'OutputB'\n  | 'OutputC'\n  | 'Input'\n  | 'DeadTimeA'\n  | 'DeadTimeB'\n\nconst getName = (genericName: GenericCompRegName, bitValues: TRow) =>\n  ({\n    OutputA: `OCR${bitValues.timerNr}A`,\n    OutputB: `OCR${bitValues.timerNr}B`,\n    OutputC: `OCR${bitValues.timerNr}C`,\n    Input: `ICR${bitValues.timerNr}`,\n    DeadTimeA: `DTR${bitValues.timerNr}L`,\n    DeadTimeB: `DTR${bitValues.timerNr}H`\n  }[genericName])\n\nconst getIsTop = (genericName: GenericCompRegName, bitValues: TRow) =>\n  bitValues.topValue === getName(genericName, bitValues)\nconst getIsInterrupt = (genericName: GenericCompRegName, bitValues: TRow) =>\n  bitValues[\n    {\n      OutputA: `OCIE${bitValues.timerNr}A`,\n      OutputB: `OCIE${bitValues.timerNr}B`,\n      OutputC: `OCIE${bitValues.timerNr}C`,\n      Input: `ICIE${bitValues.timerNr}`,\n      DeadTimeA: `DTRL${bitValues.timerNr}`,\n      DeadTimeB: `DTRH${bitValues.timerNr}`\n    }[genericName]\n  ] === '1'\nconst getIsActiveOutput = (genericName: GenericCompRegName, bitValues: TRow) =>\n  (bitValues[\n    {\n      OutputA: `CompareOutputModeA`,\n      OutputB: `CompareOutputModeB`,\n      OutputC: `CompareOutputModeC`,\n      Input: ``,\n      DeadTimeA: ``,\n      DeadTimeB: ``\n    }[genericName]\n  ] || 'disconnect') !== 'disconnect'\nconst getIsActiveDeadTime = (\n  genericName: GenericCompRegName,\n  bitValues: TRow\n) =>\n  bitValues[\n    {\n      OutputA: ``,\n      OutputB: ``,\n      OutputC: ``,\n      Input: ``,\n      DeadTimeA: `DeadTime`,\n      DeadTimeB: `DeadTime`\n    }[genericName]\n  ] === 'on'\nconst getIsUsed = (genericName: GenericCompRegName, bitValues: TRow) =>\n  getIsTop(genericName, bitValues) ||\n  getIsInterrupt(genericName, bitValues) ||\n  getIsActiveOutput(genericName, bitValues) ||\n  getIsActiveDeadTime(genericName, bitValues)\n\nconst getIsInput = (genericName: GenericCompRegName) =>\n  ({\n    OutputA: false,\n    OutputB: false,\n    OutputC: false,\n    Input: true,\n    DeadTimeA: false,\n    DeadTimeB: false\n  }[genericName])\nconst getIsOutput = (genericName: GenericCompRegName) =>\n  ({\n    OutputA: true,\n    OutputB: true,\n    OutputC: true,\n    Input: false,\n    DeadTimeA: false,\n    DeadTimeB: false\n  }[genericName])\nconst getIsDeadTime = (genericName: GenericCompRegName) =>\n  ({\n    OutputA: false,\n    OutputB: false,\n    OutputC: false,\n    Input: false,\n    DeadTimeA: true,\n    DeadTimeB: true\n  }[genericName])\n\nexport const compareRegs: GenericCompRegName[] = [\n  'OutputA',\n  'OutputB',\n  'OutputC',\n  'Input',\n  'DeadTimeA',\n  'DeadTimeB'\n]\n\nexport const getCompareRegTraits = (\n  genericName: GenericCompRegName,\n  bitValues: TRow\n) => {\n  const name = getName(genericName, bitValues)\n  const value = parseFloat(bitValues[name] || '')\n  // if (Number.isNaN(value)) debugger\n  return {\n    genericName: genericName,\n    name,\n    value,\n    code: `${name} = ${value};`,\n    isInput: getIsInput(genericName),\n    isOutput: getIsOutput(genericName),\n    isDeadTime: getIsDeadTime(genericName),\n    isActiveOutput: getIsActiveOutput(genericName, bitValues),\n    isTop: getIsTop(genericName, bitValues),\n    isInterrupt: getIsInterrupt(genericName, bitValues),\n    isUsed: getIsUsed(genericName, bitValues)\n  }\n}\nexport const getAllCompareRegTraits = (bitValues: TRow) =>\n  compareRegs.map((genericName) => getCompareRegTraits(genericName, bitValues))\n","import { debounce } from 'lodash'\nimport { useState, useEffect } from 'react'\n\nconst getHashParams = () => {\n  const hash = window.location.hash.slice(1)\n  return new URLSearchParams(hash)\n}\n\nconst setFullHash = debounce(\n  (hash: string) => {\n    const currentHash = window.location.hash.slice(1)\n    if (hash !== currentHash) {\n      window.location.replace(`${window.location.pathname}#${hash}`)\n    }\n  },\n  100,\n  // chrome doesn't like too many url changes\n  { leading: true, trailing: true }\n)\nexport const setHashFromObject = (\n  record: Record<string, string | undefined>\n) => {\n  const cleanRecord = Object.fromEntries(\n    Object.entries(record).filter(([, val]) => val !== undefined)\n  ) as Record<string, string>\n  const hashParams = new URLSearchParams(cleanRecord)\n  return setFullHash(hashParams.toString())\n}\nexport const setHashParam = (key: string, value: string | undefined) => {\n  const hashParams = getHashParams()\n  if (value === undefined) {\n    hashParams.delete(key)\n  } else {\n    hashParams.set(key, value)\n  }\n  setFullHash(hashParams.toString())\n}\n\nexport const useHashParams = () => {\n  const [hashParams, setHashParams] = useState<URLSearchParams>(\n    new URLSearchParams(window.location.hash.slice(1))\n  )\n  useEffect(() => {\n    const handleHashChange = () => {\n      setHashParams(getHashParams())\n    }\n\n    handleHashChange()\n    window.addEventListener('hashchange', handleHashChange)\n    return () => window.removeEventListener('hashchange', handleHashChange)\n  }, [])\n\n  return Object.fromEntries(hashParams.entries())\n}\n","import raw from 'raw.macro'\nimport { tsv, tsvConstraints } from '../timers'\n\n// const timers = [timer0, timer1, timer2, timer3]\nconst timers = [\n  tsv(raw('./timer0.tsv')),\n  tsv(raw('./timer1.tsv')),\n  tsv(raw('./timer2.tsv')),\n  tsv(raw('./timer3.tsv'))\n]\n\ntimers.forEach((t) =>\n  t.configs.push(\n    tsvConstraints(`\nFCPU\tFCPU_UI\n32000000\t32Mhz\n16000000\t16Mhz\n8000000\t8Mhz\n4000000\t4Mhz\n2000000\t2Mhz\n1000000\t1Mhz\n`)\n  )\n)\nexport default timers\n","import raw from 'raw.macro'\nimport { tsv, tsvConstraints } from '../timers'\n\n// const timers = [timer0, timer1, timer2, timer3]\nconst timers = [\n  tsv(raw('./timer0.tsv')),\n  tsv(raw('./timer1.tsv')),\n  tsv(raw('./timer2.tsv'))\n]\n\ntimers.forEach((t) =>\n  t.configs.push(\n    tsvConstraints(`\nFCPU\tFCPU_UI\n16000000\t16Mhz\n20000000\t20Mhz\n8000000\t8Mhz\n4000000\t4Mhz\n2000000\t2Mhz\n1000000\t1Mhz\n`)\n  )\n)\nexport default timers\n","export type TTableNames = string\n\nexport type TRow = {\n  [k: string]: string\n}\nexport type TTable = TRow[]\nexport type TTimerConfig = TTable[]\n\nexport type TTimerRegisters = {\n  [k: string]: string[]\n}\nexport type TDescriptions = {\n  [k: string]: string\n}\n\nexport type TDefaultState = TRow\n\nexport type TTimer = {\n  configs: TTimerConfig\n  registers: TTimerRegisters\n  timerNr: number\n}\nexport enum PanelModes {\n  Normal = 'Normal',\n  Internal = 'With Internals',\n  ByDependencies = 'By Dependencies'\n}\nexport enum MicroControllers {\n  LGT8F328P = 'LGT8F328P',\n  ATMEGA328P = 'ATMEGA328P'\n}\n","import lgt328p from './lgt328p'\nimport atmega328p from './atmega328p'\nimport { MicroControllers } from '../helpers/types'\n// Timer tables: https://docs.google.com/spreadsheets/d/1VDKsVMj4c5aOxKWu2UroWFAeODwbeVwksYxhjtuEopI/edit#gid=1264839381\nconst timers = {\n  [MicroControllers.LGT8F328P]: lgt328p,\n  [MicroControllers.ATMEGA328P]: atmega328p\n}\n\nexport default timers\n","import {\n  atom,\n  atomFamily,\n  DefaultValue,\n  selector,\n  selectorFamily,\n  useSetRecoilState\n} from 'recoil'\nimport { setHashFromObject, setHashParam, useHashParams } from './useHash'\n\nimport timers from '../data'\nimport { useEffect, useRef } from 'react'\nimport { MicroControllers, PanelModes } from '../helpers/types'\n\nexport const panelModeState = atom({\n  key: 'PanelModeState',\n  default: PanelModes.Normal\n})\n\nexport function usePrevious<T>(value: T) {\n  const ref = useRef<T>()\n  useEffect(() => {\n    ref.current = value\n  })\n  return ref.current\n}\nconst defaultState = { mcu: MicroControllers.LGT8F328P, timer: '0' }\nexport const RegisterLocationStateChange = () => {\n  const params = useHashParams()\n  const prev = usePrevious(params)\n  const withNulls: Record<string, string | undefined> = { ...defaultState }\n  for (const key in { ...params, ...prev }) {\n    withNulls[key] = params[key]\n  }\n  useSetRecoilState(userConfigBitBulkState)(withNulls)\n  return <></>\n}\nexport const RegisterLocationState = () => {\n  return (\n    <>\n      <RegisterLocationStateChange />\n    </>\n  )\n}\nconst userConfigState_internal = atomFamily<string | undefined, string>({\n  key: 'userConfigState_internal',\n  default: (param) => undefined\n})\nconst userConfigBitBulkState = selector<Record<string, string | undefined>>({\n  key: 'userConfigBitBulkState',\n  get: ({ get }) => {\n    throw new Error('Dont use')\n  },\n  set: ({ set }, obj) => {\n    if (obj instanceof DefaultValue) return\n    for (const key in obj) {\n      set(userConfigState_internal(key), obj[key])\n    }\n    setHashFromObject(obj)\n  }\n})\n\nexport const userConfigBitState = selectorFamily<string | undefined, string>({\n  key: 'userConfigBitState',\n  get:\n    (bitName: string) =>\n    ({ get }) =>\n      get(userConfigState_internal(bitName)),\n  set:\n    (bitName: string) =>\n    ({ get, set }, value) => {\n      if (value instanceof DefaultValue) value = undefined\n      const current = get(userConfigState_internal(bitName))\n      if (current !== value) {\n        set(userConfigState_internal(bitName), value)\n        setHashParam(bitName, value)\n      }\n    }\n})\n\nexport const mcuTimers = selector({\n  key: 'mcuTimers',\n  get: ({ get }) => {\n    const micro = get(userConfigBitState('mcu')) as MicroControllers\n    return timers[micro]\n  }\n})\nexport const timerState = selector({\n  key: 'timerState',\n  get: ({ get }) => get(mcuTimers)[+(get(userConfigBitState('timer')) || 0)]\n})\n","import { TTable } from './types'\n\nimport uniq from 'lodash/uniq'\nimport mapValues from 'lodash/mapValues'\nimport intersection from 'lodash/intersection'\nimport { remove } from 'lodash'\n\nexport const getValuesPerBitName = (configs: TTable[]) => {\n  let valuesPerBitName: Record<string, string[]> = {}\n  for (const table of configs) {\n    for (const row of table) {\n      for (const col in row) {\n        const val = row[col]\n        valuesPerBitName[col] = valuesPerBitName[col] || []\n        if (val) valuesPerBitName[col].push(val)\n      }\n    }\n  }\n  return mapValues(valuesPerBitName, uniq)\n}\n\nexport const splitTables = ([left, ...tables]: TTable[]): TTable[][] => {\n  if (!left) return []\n  const cluster = [left]\n  let remaining: TTable[] = []\n  let colsLeft = Object.keys(left[0])\n  let changed\n  do {\n    changed = false\n    remaining = []\n\n    for (const table of tables) {\n      const colsRight = Object.keys(table[0])\n      const match = intersection(colsLeft, colsRight).length > 0\n      if (match) {\n        cluster.push(table)\n        colsLeft = uniq([...colsLeft, ...colsRight])\n        changed = true\n      } else {\n        remaining.push(table)\n      }\n    }\n    tables = remaining\n  } while (changed)\n\n  return [cluster, ...splitTables(remaining)]\n}\nexport function isTruthy<TValue>(value: TValue | undefined): value is TValue {\n  return !!value\n}\n\nexport const WILDCARD = '*'\nexport const getFullDomains = (tables: TTable[]): Record<string, string[]> => {\n  const domains: Record<string, string[]> = {}\n  for (const table of tables) {\n    for (const row of table) {\n      for (const [variable, value] of Object.entries(row)) {\n        domains[variable] = domains[variable] || []\n        if (value !== WILDCARD && !value.startsWith('!')) {\n          if (!domains[variable].includes(value)) domains[variable].push(value)\n        }\n      }\n    }\n  }\n  return domains\n}\nexport const getConstrainedDomains = (\n  tables: TTable[],\n  domains_?: Record<string, string[]>\n): Record<string, string[]> => {\n  const domains = domains_ || getFullDomains(tables)\n  let done = false\n  while (!done) {\n    done = true\n    for (const table_ of tables) {\n      const table = table_.filter((row) => {\n        return Object.entries(row).every(([variable, value]) => {\n          if (value === WILDCARD) return true\n          if (value.startsWith('!')) {\n            const negated = value.slice(1)\n            return domains[variable].some((value) => value !== negated)\n          }\n          return domains[variable].includes(value)\n        })\n      })\n      for (const variable of Object.keys(table[0] || {})) {\n        // todo handle numerics\n        const values = table.map((row) => row[variable])\n        const hasWildcards = values.includes(WILDCARD)\n        if (hasWildcards) continue\n        const negatedVals = remove(values, (val) => val?.startsWith('!')).map(\n          (val) => val?.slice(1)\n        )\n        const positiveVals = values.filter(isTruthy) // Todo: remove the filter after replacing the wildcard with asterisks\n        const miniDomain = uniq([\n          ...positiveVals,\n          ...negatedVals.flatMap((negated) =>\n            domains[variable].filter((value) => value !== negated)\n          )\n        ])\n        if (domains[variable].length === miniDomain.length) continue\n        const sizeBefore = domains[variable].length\n        domains[variable] = intersection(domains[variable], miniDomain)\n        const sizeAfter = domains[variable].length\n        if (sizeBefore !== sizeAfter) done = false\n      }\n    }\n  }\n  return domains\n}\n","import { mapValues, uniq } from 'lodash'\nimport { selector, selectorFamily } from 'recoil'\nimport {\n  getConstrainedDomains,\n  splitTables,\n  getFullDomains\n} from '../helpers/helpers'\nimport { TRow, TTable } from '../helpers/types'\nimport { timerState, userConfigBitState } from '../state/state'\n\nexport const groupsState = selector({\n  key: 'groupsState',\n  get: ({ get }) => splitTables(get(timerState).configs)\n})\n\nconst getBitNames = (group: TTable[]) => {\n  if (group === undefined) debugger\n  return uniq(group.flatMap((table: TTable) => Object.keys(table[0])))\n}\nexport const suggestedGroupAssignmentState = selectorFamily({\n  key: 'suggestedGroupAssignmentState',\n  get:\n    (groupIdx: number) =>\n    ({ get }) => {\n      const userState = get(groupConfigState(groupIdx))\n      const tableSets = get(groupsState)\n      const group = tableSets[groupIdx]\n      let domains = { ...get(groupDomainsState(groupIdx)) }\n      const instantiations: Record<string, string> = {}\n      for (const variable of Object.keys(domains)) {\n        if (domains[variable].length < 2) continue // if there is only one option, no need to fix it\n        instantiations[variable] = domains[variable][0]\n        domains = getConstrainedDomains(\n          [[instantiations], [userState], ...group],\n          domains\n        )\n      }\n      return mapValues(domains, (domain) => domain[0])\n    }\n})\n\nexport const suggestedBitAssignmentState = selectorFamily({\n  key: 'suggestedBitAssignmentState',\n  get:\n    (bitName: string) =>\n    ({ get }) => {\n      const groupIdx = get(groupIdxFromBitNameState(bitName))\n      if (groupIdx === -1) return undefined\n\n      return get(suggestedGroupAssignmentState(groupIdx))[bitName]\n    }\n})\nexport const suggestedAssignmentState = selector<TRow>({\n  key: 'suggestedAssignmentState',\n  get: ({ get }) => {\n    const assignments = get(groupsState)\n      .map((_, i) => get(suggestedGroupAssignmentState(i)))\n      .flat()\n    return Object.assign({}, ...assignments)\n  }\n})\n\nexport const groupConfigState = selectorFamily({\n  key: 'groupConfigState',\n  get:\n    (groupIdx: number) =>\n    ({ get }) => {\n      const tableSets = get(groupsState)\n      const group = tableSets[groupIdx]\n      const relevantBitNames = getBitNames(group)\n      const userConfig: TRow = {}\n      for (const bitName of relevantBitNames) {\n        const userBitConfig = get(userConfigBitState(bitName))\n        if (userBitConfig !== undefined) userConfig[bitName] = userBitConfig\n      }\n      return userConfig\n    }\n})\n\nexport const groupIdxFromBitNameState = selectorFamily({\n  key: 'groupIdxFromBitNameState',\n  get:\n    (bitName: string) =>\n    ({ get }) => {\n      const tableSets = get(groupsState)\n      const idx = tableSets.findIndex((group) =>\n        group.some((table) => table[0].hasOwnProperty(bitName))\n      )\n      return idx\n    }\n})\nexport const groupFromBitNameState = selectorFamily({\n  key: 'groupFromBitNameState',\n  get:\n    (bitName: string) =>\n    ({ get }) => {\n      const tableSets = get(groupsState)\n      const idx = get(groupIdxFromBitNameState(bitName))\n      return tableSets[idx]\n    }\n})\nexport const groupDomainsState = selectorFamily({\n  key: 'groupDomainsState',\n  get:\n    (groupIdx: number) =>\n    ({ get }) => {\n      const tableSets = get(groupsState)\n      const group = tableSets[groupIdx]\n      const userState = get(groupConfigState(groupIdx))\n      return getConstrainedDomains([[userState], ...group])\n    }\n})\nexport const allBitOptionsState = selectorFamily({\n  key: 'allBitOptionsState',\n  get:\n    (bitName: string) =>\n    ({ get }) => {\n      const group = get(groupFromBitNameState(bitName))\n      return getFullDomains(group)[bitName]\n    }\n})\nexport const enabledBitOptionsState = selectorFamily({\n  key: 'enabledBitOptionsState',\n  get:\n    (bitName: string) =>\n    ({ get }) => {\n      // todo, cleanup, perf\n      const groupIdx = get(groupIdxFromBitNameState(bitName))\n      const domains = get(groupDomainsState(groupIdx))\n      return domains[bitName]\n    }\n})\n\nexport const bitOptionsState = selectorFamily({\n  key: 'bitOptionsState',\n  get:\n    (bitName: string) =>\n    ({ get }) => {\n      const groupIdx = get(groupIdxFromBitNameState(bitName))\n      const userState = get(groupConfigState(groupIdx))\n      const allBitOptions = get(allBitOptionsState(bitName))\n\n      const tableSets = get(groupsState)\n      const group = tableSets[groupIdx]\n      let enabledOptions = get(groupDomainsState(groupIdx))[bitName]\n      if (userState[bitName]) {\n        const { [bitName]: _discarded, ...selectedWithout } = userState\n        enabledOptions = getConstrainedDomains([[selectedWithout], ...group])[\n          bitName\n        ]\n      }\n      const defaultValue = get(suggestedBitAssignmentState(bitName))\n      const forcedOption =\n        !userState[bitName] && enabledOptions.length === 1\n          ? enabledOptions[0]\n          : undefined\n      const suggestedOption =\n        !userState[bitName] && enabledOptions.length > 1\n          ? defaultValue\n          : undefined\n      return {\n        bitName,\n        selectedOption: userState[bitName],\n        suggestedOption: suggestedOption || forcedOption || userState[bitName],\n        forcedOption: forcedOption,\n        options: allBitOptions.map((value) => ({\n          isSuggested: value === suggestedOption,\n          value,\n          isDisabled: !enabledOptions.includes(value) || !!forcedOption\n        }))\n      }\n    }\n})\n\nexport type TCheckboxGroupData = {\n  bitName: string\n  selectedOption: string | undefined\n  suggestedOption: string | undefined\n  forcedOption: string | undefined\n  options: {\n    isSuggested: boolean\n    value: string\n    isDisabled: boolean\n  }[]\n}[]\nexport type TCheckboxMinimalGroupData = {\n  bitName: string\n  options: {\n    value: string\n  }[]\n}[]\n","import { useEffect, useRef } from 'react'\nimport useSize from '@react-hook/size'\nimport { Tag } from 'rsuite'\n\nimport XAxis from './XAxis'\nimport YAxis from './YAxis'\nimport { scaleLinear, extent } from 'd3'\nimport { margin } from './margin'\nimport simTimer from '../helpers/simulator'\n\nimport './Plot.css'\nimport CompareRegisterHandle, {\n  CompareRegisterHandleRef\n} from './CompareRegisterHandle'\nimport InterruptArrow from './InterruptArrow'\nimport { Curve } from './Curve'\nimport {\n  getAllCompareRegTraits,\n  getCompareRegTraits\n} from '../helpers/compareRegisterUtil'\nimport { useRecoilValue, useSetRecoilState } from 'recoil'\nimport { usePrevious, userConfigBitState } from '../state/state'\nimport { suggestedAssignmentState } from '../Panes/state'\n\ntype Props = {\n  style: Object\n}\nexport default function Plot({ style }: Props) {\n  const bitValues = useRecoilValue(suggestedAssignmentState)\n  const counterMax = parseInt(bitValues.counterMax)\n  const param = {\n    timerNr: bitValues.timerNr,\n    timerMode: bitValues.timerMode as any,\n    prescaler:\n      bitValues.clockPrescalerOrSource === 'disconnect'\n        ? NaN\n        : parseInt(bitValues.clockPrescalerOrSource) ||\n          parseInt(bitValues.FCPU) / 1000,\n    cpuHz:\n      parseInt(bitValues.FCPU || '1') *\n      (bitValues.clockDoubler === 'on' ? 2 : 1),\n    top: 0,\n    counterMax: parseInt(bitValues.counterMax),\n    tovTime: bitValues.setTovMoment as any,\n    OCRnXs: [] as number[],\n    OCRnXs_behaviour: [\n      bitValues.CompareOutputModeA as any,\n      bitValues.CompareOutputModeB as any,\n      bitValues.CompareOutputModeC as any\n    ],\n    ICRn: 0,\n    deadTimeEnable: bitValues.DeadTime === 'on',\n    deadTimeA: getCompareRegTraits('DeadTimeA', bitValues).value,\n    deadTimeB: getCompareRegTraits('DeadTimeB', bitValues).value\n  }\n\n  const IOCR_states = getAllCompareRegTraits(bitValues).map((traits, i) => ({\n    ...traits,\n    // eslint-disable-next-line react-hooks/rules-of-hooks\n    ref: useRef<CompareRegisterHandleRef>(null),\n    i\n  }))\n\n  param.OCRnXs = IOCR_states.filter(({ isOutput }) => isOutput).map(\n    ({ value }) => value\n  )\n\n  param.ICRn = IOCR_states.find(({ isInput }) => isInput)!.value\n\n  param.top =\n    IOCR_states.find(({ isTop }) => isTop)?.value ??\n    parseInt(bitValues.topValue)\n  const ocrMax = parseInt(bitValues.topValue) || counterMax\n\n  /* TODO: put somewhere else */\n  /* DEFAULTS FOR COMPARE REGISTERS */\n  {\n    const prev = usePrevious(IOCR_states)\n    const ioCount = IOCR_states.filter(\n      ({ isDeadTime, isUsed }) => !isDeadTime\n    ).length\n    IOCR_states.forEach((iocr, i) => {\n      // eslint-disable-next-line react-hooks/rules-of-hooks\n      const setReg = useSetRecoilState(userConfigBitState(iocr.name))\n      const top = param.top || Number.parseInt(bitValues.counterMax)\n      if (prev && !prev[i].isUsed && iocr.isUsed) {\n        const n = iocr.isDeadTime\n          ? Math.sqrt(counterMax) / 2\n          : (top / (ioCount + 1)) * (i + 1)\n        setReg('' + Math.round(n))\n      }\n      if (prev?.[i].isUsed && !iocr.isUsed) {\n        setReg(undefined)\n      }\n    })\n  }\n  /* --- */\n  const simulation = simTimer(param)\n  const containerRef = useRef<HTMLDivElement>(null)\n  const [width, height_] = useSize(containerRef)\n  const height_ouputCompare = 30\n  const margin_ouputCompare = 10\n  const activeOCnXs = IOCR_states.filter(({ isActiveOutput }) => isActiveOutput)\n  const height_timer =\n    height_ - height_ouputCompare * (activeOCnXs.length + 0.5)\n  const xScale = scaleLinear()\n    .domain(extent(simulation.t) as [number, number])\n    .range([margin.left, width - margin.right])\n  const yScale = scaleLinear()\n    .domain([0, ocrMax])\n    .rangeRound([height_timer - margin.bottom, margin.top])\n\n  useEffect(() => {\n    const containerEl = containerRef.current\n\n    const handleMouseUp = (e: Event) => {\n      IOCR_states.forEach(({ ref }) => ref.current?.onMouseUp(undefined as any))\n    }\n    const handleMouseMove = (e: MouseEvent | TouchEvent) => {\n      if (!containerEl) return\n      let y = e instanceof MouseEvent ? e.clientY : e.targetTouches[0].clientY\n      const targetY = containerEl.getBoundingClientRect().y\n      const offsetY = y - targetY\n      IOCR_states.forEach(({ ref }) => ref.current?.onMouseMove(offsetY, e))\n    }\n    document.addEventListener('mouseup', handleMouseUp)\n    document.addEventListener('touchend', handleMouseUp)\n    containerEl?.addEventListener('mousemove', handleMouseMove, {\n      passive: false\n    })\n    containerEl?.addEventListener('touchmove', handleMouseMove, {\n      passive: false\n    })\n    return () => {\n      document.removeEventListener('mouseup', handleMouseUp)\n      document.removeEventListener('touchend', handleMouseUp)\n      containerEl?.removeEventListener('mousemove', handleMouseMove)\n      containerEl?.removeEventListener('touchmove', handleMouseMove)\n    }\n  }, [IOCR_states])\n  return (\n    <div className=\"plotContainer\" ref={containerRef} style={style}>\n      <Tag className=\"frequency\">\n        Freq: {Math.round(simulation.freq * 100) / 100}Hz\n      </Tag>\n      <svg className=\"plot\">\n        <XAxis {...{ xScale, height: height_timer, data: simulation }} />\n        <YAxis {...{ yScale, width }} />\n        <Curve\n          {...{\n            xScale,\n            yScale,\n            width,\n            height: height_timer,\n            data: simulation.t.map((t, i) => [t, simulation.TCNT[i]]),\n            idx: 'TCNT',\n            key: 'TCNT'\n          }}\n        />\n        {activeOCnXs.map(({ isActiveOutput, i }, k) => {\n          const yScale = scaleLinear()\n            .domain([0, 1])\n            .rangeRound([\n              height_timer + height_ouputCompare * (k + 1),\n              height_timer + height_ouputCompare * k + margin_ouputCompare\n            ])\n          return (\n            <>\n              {isActiveOutput && (\n                <Curve\n                  {...{\n                    key: 'OC' + i,\n                    idx: i,\n                    name: 'OC' + param.timerNr + 'ABC'[i],\n                    xScale,\n                    yScale,\n                    data: simulation.t.map((t, j) => [\n                      t,\n                      simulation.OCnXs[i][j]\n                    ])\n                  }}\n                />\n              )}\n              {param.deadTimeEnable && i < 2 && (\n                <Curve\n                  {...{\n                    key: 'DeadTime-' + i,\n                    idx: 'DeadTime-' + i,\n                    name: '',\n                    xScale,\n                    yScale,\n                    data: [\n                      [0, 0],\n                      ...simulation.t.map((t, j) => [\n                        t,\n                        simulation.deadTimes[i][j]\n                      ]),\n                      [simulation.t[simulation.t.length - 1], 0]\n                    ] as [number, number][]\n                  }}\n                />\n              )}\n            </>\n          )\n        })}\n\n        {simulation.MATCH_Xs.flatMap(\n          (matches, i) =>\n            IOCR_states[i].isInterrupt && (\n              <InterruptArrow\n                {...{\n                  key: i + 'interrupt',\n                  flagValues: matches,\n                  TCNT: simulation.TCNT,\n                  t: simulation.t,\n                  xScale,\n                  yScale,\n                  label: 'OCR' + bitValues.timerNr + 'ABC'[i] + ' interrupt'\n                }}\n              />\n            )\n        )}\n        {IOCR_states.find(({ isInput }) => isInput)!.isInterrupt && (\n          <InterruptArrow\n            {...{\n              flagValues: simulation.CAPT,\n              TCNT: simulation.TCNT,\n              t: simulation.t,\n              xScale,\n              yScale,\n              label: 'Capture interrupt',\n              key: 'Capture interrupt'\n            }}\n          />\n        )}\n        {bitValues.InterruptOnTimerOverflow === 'on' && (\n          <InterruptArrow\n            {...{\n              flagValues: simulation.OVF,\n              TCNT: simulation.TCNT,\n              t: simulation.t,\n              xScale,\n              yScale,\n              label: 'Overflow interrupt',\n              key: 'Overflow interrupt'\n            }}\n          />\n        )}\n\n        {IOCR_states.map(({ isUsed, ref, value, name }) => {\n          // eslint-disable-next-line react-hooks/rules-of-hooks\n          const setUserConfigBit = useSetRecoilState(userConfigBitState(name))\n\n          // TODO: redo the extent thing with DTRs\n          const yExtent2: [number, number] = name.startsWith('DTR')\n            ? [0, Math.sqrt(counterMax + 1) - 1]\n            : [0, ocrMax]\n          const yScale = scaleLinear()\n            .domain(yExtent2)\n            .rangeRound([height_timer - margin.bottom, margin.top])\n          return (\n            isUsed && (\n              <CompareRegisterHandle\n                {...{\n                  key: name,\n                  ref,\n                  width,\n                  yExtent: yExtent2,\n                  yScale,\n                  compareRegisterValue: value,\n                  setCompareRegisterValue: (val: number) =>\n                    // eslint-disable-next-line react-hooks/rules-of-hooks\n                    setUserConfigBit(val + ''),\n                  name\n                }}\n              />\n            )\n          )\n        })}\n      </svg>\n    </div>\n  )\n}\n","import { map } from 'lodash'\nimport { useRecoilValue } from 'recoil'\nimport { getAllCompareRegTraits } from '../helpers/compareRegisterUtil'\nimport { isTruthy } from '../helpers/helpers'\nimport { timerState } from '../state/state'\nimport { suggestedAssignmentState, suggestedBitAssignmentState } from './state'\nimport { Button } from 'rsuite'\nimport copy from 'copy-to-clipboard'\nimport React, { useEffect, useRef, useState } from 'react'\nconst omitRegisterZeros = true\n\nfunction LinkToThisPage() {\n  const [url, setUrl] = useState(window.location.href)\n  useEffect(() => {\n    const handleUrlChange = () => {\n      setUrl(window.location.href)\n    }\n    window.addEventListener('hashchange', handleUrlChange)\n    return () => window.removeEventListener('hashchange', handleUrlChange)\n  }, [])\n  return <>{'/* ' + url + ' */\\n'}</>\n}\nexport default function Code() {\n  const codeContainerRef = useRef<HTMLPreElement>(null)\n  return (\n    <>\n      <CopyToClipboard codeContainerRef={codeContainerRef} />\n      <pre style={{ margin: 0 }} ref={codeContainerRef}>\n        {`\\\nvoid setup(){\n  `}\n        <LinkToThisPage />\n        {`  noInterrupts();\\n`}\n        <TimerConfgCode />\n        <CompareRegsCode />\n        {`  interrupts();\n}\n`}\n        <Interrupts />\n      </pre>\n    </>\n  )\n}\nconst TimerConfgCode = () => {\n  const omitBitZeros = true\n  const { registers } = useRecoilValue(timerState)\n  const code = map(registers, (bitNames, regName) => {\n    const bitAssignments = bitNames\n      .map((bitName) => {\n        const bitValue =\n          // eslint-disable-next-line react-hooks/rules-of-hooks\n          useRecoilValue(suggestedBitAssignmentState(bitName)) || '0'\n        if (omitBitZeros && bitValue === '0') return ''\n        return `${bitValue} << ${bitName}`\n      })\n      .filter(isTruthy)\n    const bitAssignmentsStr = bitAssignments.length\n      ? `\\n    ${bitAssignments.join(' |\\n    ')}`\n      : '0'\n    if (omitRegisterZeros && bitAssignmentsStr === '0') return ''\n    return `  ${regName} = ${bitAssignmentsStr};`\n  })\n    .flat()\n    .filter(isTruthy)\n  let str = code.join('\\n')\n  if (str.length) str += '\\n'\n  return <>{str}</>\n}\nfunction CompareRegsCode() {\n  const suggestedConfig = useRecoilValue(suggestedAssignmentState)\n\n  const code = getAllCompareRegTraits(suggestedConfig)\n    .filter(({ isUsed }) => isUsed)\n    .map(({ code }) => code)\n  let str = code.join('\\n  ')\n  if (str.length) str = '  ' + str + '\\n'\n  return <>{str}</>\n}\nfunction Interrupts() {\n  const interruptBitNames = [\n    'interruptVectorCodeA',\n    'interruptVectorCodeB',\n    'interruptVectorCodeC',\n    'interruptVectorCodeOVF',\n    'interruptVectorCaptureCode'\n  ]\n  const interruptCommonSignature = useRecoilValue(\n    suggestedBitAssignmentState('InterruptCommonSignature')\n  )\n  let code = interruptBitNames\n    .map(\n      (bitName) =>\n        // eslint-disable-next-line react-hooks/rules-of-hooks\n        useRecoilValue(suggestedBitAssignmentState(bitName)) || '//nocode'\n    )\n    .filter((bitValue) => bitValue !== '//nocode')\n\n  if (code.length && interruptCommonSignature) {\n    code = [\n      interruptCommonSignature + ' {',\n      ...code.map((code) => '    ' + code.split('\\n').join('\\n    ')),\n      '}'\n    ]\n  }\n  let str = code.join('\\n')\n  if (str.length) str += '\\n'\n  return <>{str}</>\n}\n\nconst CopyToClipboard = React.memo(\n  ({\n    codeContainerRef\n  }: {\n    codeContainerRef: React.RefObject<HTMLPreElement>\n  }) => {\n    // using refs to avoid rerenders\n    const [clicked, setClicked] = useState(false)\n    useEffect(() => {\n      setTimeout(() => setClicked(false), 600)\n    }, [clicked])\n    return (\n      <div>\n        <Button\n          color={clicked ? 'green' : undefined}\n          onClick={() => {\n            copy(codeContainerRef.current?.textContent || '')\n            setClicked(true)\n            console.log(codeContainerRef.current?.textContent || '')\n          }}\n        >\n          {clicked ? 'Copied' : 'Copy'}\n        </Button>\n      </div>\n    )\n  }\n)\n","import {\n  Checkbox,\n  CheckboxGroup,\n  FlexboxGrid,\n  Icon,\n  Panel,\n  Tooltip,\n  Whisper\n} from 'rsuite'\nimport { useRecoilValue, useSetRecoilState } from 'recoil'\nimport { bitNameDescriptions, bitValueDescriptions } from '../data/timers'\nimport { difference, map, uniq } from 'lodash'\nimport './TimerSetup.css'\n\nimport Plot from '../Plot/Plot'\nimport Code from './Code'\nimport ResizePanel from 'react-resize-panel-ts'\nimport { panelModeState, userConfigBitState } from '../state/state'\nimport { bitOptionsState, groupsState } from './state'\nimport { TTable, PanelModes } from '../helpers/types'\nconst BitConfig = ({\n  bitName,\n  humanName\n}: {\n  bitName: string\n  humanName?: string\n}) => {\n  const setUserConfigBit = useSetRecoilState(userConfigBitState(bitName))\n  const { selectedOption, forcedOption, options } = useRecoilValue(\n    bitOptionsState(bitName)\n  )\n  const descr = bitValueDescriptions[bitName]\n  const descrTitle = descr?.title\n  return (\n    <CheckboxGroup\n      inline\n      value={[selectedOption || forcedOption]}\n      onChange={(val: string[]) => setUserConfigBit(val[1])}\n    >\n      <p>\n        {humanName || bitName}{' '}\n        {descrTitle && (\n          <Whisper\n            placement=\"right\"\n            trigger=\"hover\"\n            speaker={<Tooltip>{descrTitle}</Tooltip>}\n          >\n            <Icon\n              icon=\"info-circle\"\n              style={{ color: 'lightgrey', fontSize: 12 }}\n            />\n          </Whisper>\n        )}\n      </p>\n      {options.map(({ value, isSuggested, isDisabled }, i) => {\n        const bitValueDescr = descr?.[value]\n\n        return (\n          <span key={i}>\n            <Checkbox\n              indeterminate={isSuggested}\n              value={value}\n              disabled={isDisabled}\n            >\n              {value}\n            </Checkbox>{' '}\n            {bitValueDescr && (\n              <Whisper\n                placement=\"right\"\n                trigger=\"hover\"\n                speaker={<Tooltip>{bitValueDescr}</Tooltip>}\n              >\n                <Icon\n                  icon=\"info-circle\"\n                  style={{ color: 'lightgrey', fontSize: 12 }}\n                />\n              </Whisper>\n            )}\n          </span>\n        )\n      })}\n    </CheckboxGroup>\n  )\n}\n\ntype TPanel = {\n  panelName: string\n  bitNames: {\n    bitName: string\n    humanName?: string\n  }[]\n}\nconst getPanesByGroup = (groups: TTable[][]): TPanel[] =>\n  groups.map((group, i) => ({\n    panelName: `Group ${i}`,\n    bitNames: group\n      .map((table) => Object.keys(table[0]))\n      .flat()\n      .map((bitName) => ({ bitName }))\n  }))\n\nconst getAllBitnamesInGroups = (groups: TTable[][]) =>\n  uniq(\n    groups\n      .flat()\n      .map((table) => Object.keys(table[0]))\n      .flat()\n  )\nconst getPanesGroupedByDescription = (groups: TTable[][]): TPanel[] => {\n  const allBitnamesInGroups = getAllBitnamesInGroups(groups)\n  return map(bitNameDescriptions, (bitDescriptions, panelName) => ({\n    panelName,\n    bitNames: map(bitDescriptions, (humanName, bitName) => ({\n      bitName,\n      humanName\n    })).filter(({ bitName }) => allBitnamesInGroups.includes(bitName))\n  })).filter(({ bitNames }) => bitNames.length)\n}\nconst getHiddenPane = (groups: TTable[][]): TPanel => {\n  const allBitnames = getAllBitnamesInGroups(groups)\n\n  const visibleBitnames: string[] = Object.values(bitNameDescriptions)\n    .map(Object.values)\n    .flat()\n  return {\n    panelName: 'Internals',\n    bitNames: difference(allBitnames, visibleBitnames).map((bitName) => ({\n      bitName\n    }))\n  }\n}\n\nfunction TimerSetup() {\n  const groups = useRecoilValue(groupsState)\n\n  const panelMode = useRecoilValue(panelModeState)\n  let panels: TPanel[]\n  switch (panelMode) {\n    case PanelModes.Normal:\n      panels = getPanesGroupedByDescription(groups)\n      break\n    case PanelModes.Internal:\n      panels = [getHiddenPane(groups), ...getPanesGroupedByDescription(groups)]\n      break\n    case PanelModes.ByDependencies:\n      panels = getPanesByGroup(groups)\n      break\n  }\n  const style = { width: 100 / (panels.length + 1) + '%' }\n\n  const r = (\n    <div className=\"TimerSetup\">\n      <FlexboxGrid style={{ flexGrow: 1, overflow: 'scroll' }}>\n        {panels.map(({ panelName, bitNames }, i) => (\n          <FlexboxGrid.Item key={panelName} style={style}>\n            <Panel header={panelName} bordered shaded defaultExpanded>\n              {bitNames.map(({ bitName, humanName }, i) => (\n                <BitConfig key={i} bitName={bitName} humanName={humanName} />\n              ))}\n            </Panel>\n          </FlexboxGrid.Item>\n        ))}\n        <FlexboxGrid.Item key=\"code\" style={style}>\n          <Panel header=\"Code\" bordered shaded defaultExpanded>\n            <Code />\n          </Panel>\n        </FlexboxGrid.Item>\n      </FlexboxGrid>\n      <ResizePanel\n        direction=\"n\"\n        style={{\n          width: '100%',\n          bottom: 0,\n          flexGrow: 0,\n          borderTop: '1px solid lightgrey',\n          height: 200,\n          touchAction: 'none'\n        }}\n      >\n        <Plot style={{ minHeight: 300 }} />\n      </ResizePanel>\n    </div>\n  )\n  return r\n}\n\nexport default TimerSetup\n","import { map } from 'lodash'\nimport { useRecoilState, useRecoilValue } from 'recoil'\nimport { Container, Content, Header, Icon, Nav, Navbar, Dropdown } from 'rsuite'\nimport 'rsuite/dist/styles/rsuite-default.css'\n\nimport './App.css'\nimport TimerSetup from './Panes/TimerSetup'\nimport { PanelModes, MicroControllers } from './helpers/types'\nimport {\n  panelModeState,\n  RegisterLocationState,\n  mcuTimers,\n  userConfigBitState\n} from './state/state'\nimport { setHashFromObject } from './state/useHash'\nconst gh = 'https://github.com/dbuezas/arduino-web-timers'\nconst App = () => {\n  const timerIdx = useRecoilValue(userConfigBitState('timer'))\n  const mcu = useRecoilValue(userConfigBitState('mcu'))\n  const timers = useRecoilValue(mcuTimers)\n  const [panelMode, setPanelMode] = useRecoilState(panelModeState)\n  const isLoading = mcuTimers === undefined || timerIdx === undefined\n  return (\n    <>\n      <link\n        rel=\"stylesheet\"\n        href=\"https://cdnjs.cloudflare.com/ajax/libs/github-fork-ribbon-css/0.2.3/gh-fork-ribbon.min.css\"\n      />\n      <div>\n        <RegisterLocationState />\n        {!isLoading && (\n          <Container className=\"App\">\n            <Header>\n              <Navbar appearance=\"inverse\">\n                <Navbar.Header>\n                  &nbsp;\n                  <span>\n                    <img\n                      src=\"./logo.png\"\n                      alt=\"logo\"\n                      style={{ width: 55.5, height: 55.5, float: 'left' }}\n                    />\n                    &nbsp;\n                    <span\n                      style={{\n                        float: 'left',\n                        marginTop: 7,\n                        textAlign: 'center'\n                      }}\n                    >\n                      ARDUINO WEB\n                      <br />\n                      TIMERS\n                    </span>\n                  </span>\n                </Navbar.Header>\n                <Navbar.Body>\n                  <Nav>\n                    <Dropdown\n                      trigger=\"click\"\n                      icon={<Icon icon=\"microchip\" />}\n                      title={mcu}\n                      placement=\"bottomEnd\"\n                    >\n                      {map(MicroControllers, (aChip) => (\n                        <Dropdown.Item\n                          // active={aChip === mcu}\n                          onSelect={(mcu) =>\n                            setHashFromObject({\n                              mcu,\n                              timer: '0'\n                            })\n                          }\n                          eventKey={aChip}\n                          key={aChip}\n                        >\n                          {aChip}\n                        </Dropdown.Item>\n                      ))}\n                    </Dropdown>\n                  </Nav>\n                  <Nav\n                    activeKey={timerIdx}\n                    onSelect={(timer) =>\n                      setHashFromObject({\n                        mcu,\n                        timer\n                      })\n                    }\n                  >\n                    {timers.map((_: any, i) => (\n                      <Nav.Item\n                        eventKey={'' + i}\n                        key={'' + i}\n                        icon={\n                          <>\n                            <Icon icon=\"line-chart\" />\n                          </>\n                        }\n                      >\n                        Timer {i}\n                      </Nav.Item>\n                    ))}\n                  </Nav>\n                  <Nav pullRight>\n                    <Dropdown\n                      trigger=\"click\"\n                      icon={<Icon icon=\"cog\" />}\n                      title={panelMode}\n                      placement=\"bottomEnd\"\n                    >\n                      {map(PanelModes, (mode) => (\n                        <Dropdown.Item\n                          // active={mode === panelMode}\n                          onSelect={setPanelMode}\n                          eventKey={mode}\n                          key={mode}\n                        >\n                          {mode}\n                        </Dropdown.Item>\n                      ))}\n                    </Dropdown>\n                    <Dropdown\n                      trigger=\"click\"\n                      icon={<Icon icon=\"help-o\" />}\n                      title=\"About\"\n                      placement=\"bottomEnd\"\n                    >\n                      <Dropdown.Item\n                        href={gh + '/discussions/categories/show-and-tell'}\n                        target=\"_blank\"\n                      >\n                        Share what you used this for!\n                      </Dropdown.Item>\n                      <Dropdown.Item\n                        href={gh + '/discussions/categories/q-a'}\n                        target=\"_blank\"\n                      >\n                        Q&A\n                      </Dropdown.Item>\n                      <Dropdown.Item\n                        href={gh + '/discussions/categories/ideas'}\n                        target=\"_blank\"\n                      >\n                        Propose a feature\n                      </Dropdown.Item>\n                      <Dropdown.Item\n                        href={gh + '/issues/new/choose'}\n                        target=\"_blank\"\n                      >\n                        Report a bug\n                      </Dropdown.Item>\n                    </Dropdown>\n                  </Nav>\n                  <iframe\n                    src=\"https://ghbtns.com/github-btn.html?user=dbuezas&repo=arduino-web-timers&type=star&count=true\"\n                    frameBorder=\"0\"\n                    scrolling=\"0\"\n                    width=\"100\"\n                    height=\"20\"\n                    title=\"GitHub\"\n                    style={{ marginTop: 18, float: 'right' }}\n                  ></iframe>\n                </Navbar.Body>\n              </Navbar>\n            </Header>\n            <Content\n              style={{\n                padding: 10,\n                // margin: 20,\n                background: '#fff',\n                position: 'relative'\n              }}\n            >\n              <TimerSetup key={timerIdx + '-' + mcu} />\n            </Content>\n          </Container>\n        )}\n      </div>\n      <a\n        className=\"github-fork-ribbon right-bottom fixed\"\n        href={gh}\n        data-ribbon=\"Fork me on GitHub\"\n        title=\"Fork me on GitHub\"\n      >\n        Fork me on GitHub\n      </a>\n    </>\n  )\n}\n\nexport default App\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport App from './App'\nimport reportWebVitals from './reportWebVitals'\nimport { RecoilRoot } from 'recoil'\n\nReactDOM.render(\n  <React.StrictMode>\n    <RecoilRoot>\n      <App />\n    </RecoilRoot>\n  </React.StrictMode>,\n  document.getElementById('root')\n)\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals()\n"],"sourceRoot":""}